# 多路数据归并处理模板

在物联网场景下，同一个设备中，某一个测点的数据可能是通过其它测点数据计算而来，比如*point_C = point_A + point_B*，其中*point_A*和*point_B*为原始数据采集点。EnOS  Streaming Analytics提供多路数据归并处理模板，支持同一个设备下不同测点之间的运算关系。

## 性能优势

1. 支持单设备上不同测点之间的计算
2. 强大的表达式编写语法
3. 支持按点触发数据处理策略
4. 支持时序插补策略
5. 支持主数据关联计算

## 数据源

参与计算的多路数据必须属于同一个设备模型，可以是资产的模型测点和属性。在编写数据处理算法表达式时，需要使用已配置的模型测点和属性。数据源设置方法如下：

- 支持添加多个需要处理的资产模型
- 每个模型下可选择多个需要用到的测点和属性

## 触发方式设置

多路数据归并处理模板目前支持按点触发数据处理的策略。

每条处理策略支持选择一个触发点，当此触发点的数据到来时，则触发一次数据计算。计算后生成的一条记录的时间戳使用触发点的时间戳（如果在此时间截点，某个测点的数据未到达时，则采用该测点上一时刻的数据参与计算）。计算后生成记录的值为表达式的输出结果，记录的point为输出点，记录的assetId为当前资产assetId。

## 数据处理策略

当触发方式为按点触发时，每条处理策略的配置项如下：

**输出点**：承载表达式计算结果的模型测点。输出点数据类型有int、float、double、string、bool（其它类型一律转化为string类型）。

**输出逻辑**：输出逻辑为数据处理表达式，表达式支持多样化的编写语法，详见[表达式语法](statement_syntax)。

**触发点**：设置数据处理的触发点（只能是单个触发点）。触发点、输出点、表达式里面所用到的测点或属性都必须属于同一个模型。触发点不能与输出点重合。
