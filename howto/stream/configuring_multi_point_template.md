# 配置多路数据归并处理任务
创建流数据处理任务时，选择**多路归并模板**，即可配置对单设备多测点数据的归并处理任务。

## 设置触发方式

多路归并模板目前支持**按点触发**和**按固定频率触发**数据处理策略。

- **按点触发**

  从 **触发方式** 下拉菜单中，选择 **按点触发**，则相应地从**时序插补策略**下拉菜单中，选择 **上一个值**。

  每条处理策略支持选择一个触发点，当此触发点的数据到来时，则触发一次数据计算。计算后生成的一条记录的时间戳使用触发点的时间戳。如果在此时间截点，某个测点的数据未到达时，则采用该测点上一时刻的数据参与计算，即**时序插补策略**。

- **按固定频率触发**

  从 **触发方式** 下拉菜单中，选择 **按固定频率触发**，则相应地从**触发频率**下拉菜单中，选择频率的值。

  每条处理策略按照设置的固定频率触发数据计算，触发频率的时间是以EnOS流式计算系统时间为准。每一次计算开始时，使用测点的最新数据进行计算。

## 配置数据处理策略
在**数据处理**一栏中，点击**新增策略**，在弹出的窗口中配置数据处理策略。每条策略都包含输出点、输出逻辑。

当触发方式为 **按点触发** 时，对处理策略进行如下配置：

1. 在 **输出点** 下拉菜单中，选择承载输出逻辑表达式计算结果的模型测点。输出点数据类型有int、float、double、string、bool（其它类型一律转化为string类型）。
2. 在 **触发点** 下拉菜单中，选择数据处理的触发点（只能是单个触发点）。触发点、输出点、表达式里面所用到的测点或属性都必须属于同一个模型。触发点不能与输出点重合。
3. 在 **输出逻辑** 输入框中，编辑数据处理表达式。表达式支持多样化的编写语法，详见[表达式语法](../../reference/statement_syntax)。
4. 点击 **校验语法**，确定编辑的表达式符合语法规则。
5. 点击 **确认** 按钮，保存数据处理策略。

.. note:: 输出点、触发点、以及表达式里面用到的测点或属性都必须属于同一个模型。触发点不能与输出点重合。

当触发方式为 **按固定频率触发** 时，对处理策略进行如下配置：

1. 在 **输出点** 下拉菜单中，选择承载输出逻辑表达式计算结果的模型测点。输出点数据类型有int、float、double、string、bool（其它类型一律转化为string类型）。
2. 在 **输出逻辑** 输入框中，编辑数据处理表达式。表达式支持多样化的编写语法，详见[表达式语法](../../reference/statement_syntax)。
3. 点击 **校验语法**，确定编辑的表达式符合语法规则。
4. 点击 **确认** 按钮，保存数据处理策略。

## 示例

典型的按点触发数据处理任务的配置，如下图所示：

.. image:: ../../media/multi_point_stream_sample.png

## 后续操作

[保存及发布流数据处理任务](publishing_job)
