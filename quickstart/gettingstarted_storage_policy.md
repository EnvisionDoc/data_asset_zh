# 入门指引：数据存储配置和读取

该教程能帮助你学习如何快速配置TSDB存储策略及读取存储的数据。

## 前提条件

- 已被授权时序数据管理下的存储策略模块
- 已接入设备并且设备已经在发送数据
- 已申请时序数据库存储资源

## 教程目标及数据准备

**教程目标**

本教程要实现的场景是：将AI类型的原始数据采集点 *test_raw* 的数据进行分钟级TSDB存储，并通过数据服务Open API获取一段时间内 *test_raw* 点每五分钟的最大值。

**数据准备**

- 模型配置：配置教程请参考 [创建模型](/docs/device-connection/zh_CN/latest/howto/model/creating_model.html)。

本教程使用的模型 *test_Model* 的配置如下：

| 功能类型 | 名称     | 标识符   | 测点类型 | 数据类型 |
|:---------|:---------|:---------|:---------|:---------|
| 测点     | test_raw | test_raw | AI       | DOUBLE   |

## 操作步骤

使用TSDB存储策略实现本教程场景的操作步骤如下：
- 创建存储策略分组
- 配置TSDB存储策略并发布
- 使用Open API获取聚合数据

### 第一步：创建存储策略分组

如果尚未创建存储策略分组，可通过以下步骤创建存储策略分组，并关联测点所属的模型：

1. 登录EnOS控制台，进入 **时序数据管理 > 存储策略** 配置模块。
2. 点击 **新建分组**，填写存储策略分组名称，搜索并选中测点所属的模型（本教程使用的模型为 *test_Model*），将其关联至存储策略分组。
3. 点击 **确认**，即可完成存储策略分组创建。

### 第二步：配置存储策略并发布

创建好存储策略分组后，可看到TSDB存储为不同的数据类型提供分类存储。本教程需选择 **AI分钟级归一化数据**，点击卡片右上角的编辑图标，进入该策略之后，需进行如下配置：
- 数据存储时效：可按需配置数据存储时长，比如1个月。
- 存储点选择：选中模型后，再选择需要存储的测点，本教程选择 *test_Model* 下的 *test_raw* 这个测点。

内容配置完成后，点击 **确认** 按钮即可完成存储策略的保存和发布，系统会根据配置对数据进行存储。当AI数据进入分钟级归一化数据存储TSDB时，系统会自动去除掉数据时间戳的秒级后缀，因此系统只会存储每一分钟内的最后一条入库的数据。

### 第三步：使用TSDB数据服务API获取聚合数据

使用AI分钟级规一化数据存储类型对应的TSDB数据服务API接口 *Get Asset AI Data with Aggregation Logic*，可获取已存储的测点数据。调用Open API的代码示例，请前往 **EnOS控制台 > EnOS API**，查看API文档。
