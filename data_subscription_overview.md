# 数据订阅概述
数据订阅服务是EnOS开放平台为提高应用API调用效率而推出的一种主动推送服务。推送内容包括资产实时上送数据、资产告警数据、和资产主数据等信息。基于该推送服务，应用获取资产数据不需再不停轮询API，仅需在接收到EnOS推送的消息时调用API获取数据即可，大大提高API调用效率和降低API使用费用。

## 产品功能
- **多数据源订阅**：数据订阅服务支持资产实时数据、资产告警数据等数据源的订阅。
- **可视化订阅配置**：支持用户自主创建订阅Topic、配置Topic订阅内容、启停订阅Topic、删除订阅Topic。
- **订阅SDK**：提供配套的订阅Java SDK供开发者消费订阅数据。

## 产品优势
- 数据生产与消费解耦
- 丰富的数据过滤条件
- 跨组织订阅数据
- 保证at-least语义
- Pull的消费模式，实现了客户端的流控
- 支持集群消费，（即支持同一Topic被多个Consumer实例均摊消费，也支持被多个Consumer实例重复消费）

## 使用限制
- 单个组织下最多只允许创建5个订阅实例
- 每个Topic Partion数量为2，即同一个Topic最多只支持2个Consumer进行同时消费
- 暂时一个Consumer实例只能消费一个Topic
- 数据在Topic中的存储时长默认为3天



## 名词解释

数据订阅相关的专有名词及术语的定义和解释如下，方便您更好地理解相关概念并使用数据订阅进行应用开发。

**Kafka**

Kafka是一个分布式的消息系统，用户只需要把数据传给Kafka，在需要的时候直接读取就可以了，非常方便，实现异步非IO阻塞。

**Topic**

消息主题，一级消息类型，通过 Topic 对消息进行分类。

**Partition**

分区，每个Topic可以按特定的分区逻辑分区，类似MySQL的分表。Partition的数据决定了一个Topic可以同时多少个进程（用户）去写入和消费它（如果一个Topic的Partition为3，那么Producer只能同时起3个进程写入，Consumer同时有3个进程进行消费，如果启动的数量超过3个则会一直等待）。

**Producer**

消息生产者，也称为消息发布者，负责生产并发送消息。

**Consumer**

消息消费者，也称为消息订阅者，负责接收并消费消息。

**Consumer Group**

一类 Consumer 的标识，这类 Consumer 通常接收并消费一类消息，且消费逻辑一致。

**Consumer 实例**

Consumer 的一个对象实例，不同的 Consumer 实例可以运行在不同进程内或者不同机器上。一个 Consumer 实例内配置线程池消费消息。

**集群消费**

一个 Consumer Group 所标识的所有 Consumer 平均分摊消费消息。例如某个 Topic 有 9 条消息，一个 Consumer Group 有 3 个 Consumer 实例，那么在集群消费模式下每个实例平均分摊，只消费其中的 3 条消息。

**顺序发布**

对于指定的一个 Topic，客户端将按照一定的先后顺序进行发送消息。

**顺序消费**

对于指定的一个 Topic，按照一定的先后顺序进行接收消息，即先发送的消息一定会先被客户端接收到。

**消息堆积**

Producer 已经将消息发送到 订阅 服务端，但由于 Consumer 消费能力有限，未能在短时间内将所有消息正确消费掉，此时在 订阅 服务端保存着未被消费的消息，该状态即消息堆积。

**消息过滤**

订阅者可以根据过滤条件对消息进行过滤，确保订阅者最终只接收被过滤后的数据。消息过滤在 订阅 服务端完成。